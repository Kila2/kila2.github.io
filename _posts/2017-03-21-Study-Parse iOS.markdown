---
layout:     post
title:      "学习Parse iOS"
subtitle:   ""
date:       2017-03-21 14:12:00
author:     "Kila2"
tags:
- iOS
---
# 可靠上传

* 失败重传
1. 上传失败
2. 关闭App导致失败

## 方案（具体实现还要考虑多线程）
1. 构建上传命令对象->插入队列
2. 从队列取出对象->构建网络请求->上传
3. 上传失败->插入队列头部重新上传
4. 程序终止->持久化保存命令对象，带下次启动继续／重新上传
5. 持久化工作->为对象设置local_id当作临时主键->上传成功时根据主键删除该对象
